# i3 configuration file (v4) for X11 Desktop with NVIDIA GPU
# https://i3wm.org/docs/userguide.html

### CORE SYSTEM SETUP ###

# XDG Desktop Portal initialization for X11
# NEEDED: Enables desktop integration for Flatpak/Snap apps and file dialogs
# WITHOUT: Some applications won't integrate properly with the desktop
exec --no-startup-id dbus-update-activation-environment --systemd DISPLAY XAUTHORITY WAYLAND_DISPLAY
exec --no-startup-id systemctl --user import-environment DISPLAY XAUTHORITY WAYLAND_DISPLAY

### VARIABLES ###

# Modifier key (Mod4 = Windows/Super key, Mod1 = Alt)
# NEEDED: Core navigation key for all shortcuts
# WITHOUT: You'd need to reconfigure every keybinding
set $mod Mod4

# Vim-style directional keys
# OPTIONAL: Convenience variables for consistent navigation
# WITHOUT: You'd use h,j,k,l directly in each binding
set $left h
set $down j
set $up k
set $right l

# Default terminal emulator
# NEEDED: Quick terminal access
# WITHOUT: Must type full terminal command each time
set $term alacritty

# Application launcher command
# NEEDED: Quick app launching without terminal
# WITHOUT: Must use terminal to launch all programs
set $menu rofi -show run

# Workspace names
# OPTIONAL: Makes workspace config more maintainable
# WITHOUT: Would use numbers directly, harder to rename workspaces
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

### APPEARANCE ###

# Window title font (also used by i3bar unless overridden)
# NEEDED: Text must be rendered somehow
# WITHOUT: i3 falls back to a default font, may look bad
font pango:monospace 8

# Gap between windows (requires i3-gaps)
# OPTIONAL: Visual breathing room between windows
# WITHOUT: Windows touch each other (traditional i3 look)
gaps inner 10

### AUTOSTART APPLICATIONS ###

# Screen locker integration with suspend
# RECOMMENDED: Locks screen before system suspend
# WITHOUT: System suspends without locking (security risk)
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork

### INPUT CONFIGURATION ###
# (Not available in i3 - X11 handles this at a lower level)
# Configure keyboard/mouse through xorg.conf or xinput

### OUTPUT CONFIGURATION ###
# (Not available in i3 - use xrandr or arandr for display configuration)

### IDLE CONFIGURATION ###
# (Not built into i3 - xss-lock handles basic screen locking above)
# For more complex idle behavior, use xautolock or xidlehook

### KEY BINDINGS - BASICS ###

# Open terminal
# ESSENTIAL: Primary way to interact with system
# WITHOUT: Would need to use dmenu/rofi to launch terminal
bindsym $mod+Return exec $term

# Close focused window
# ESSENTIAL: Need a way to close windows
# WITHOUT: Must use mouse to click X button or kill from terminal
bindsym $mod+Shift+q kill

# Open application launcher
# ESSENTIAL: Launch programs without terminal
# WITHOUT: Everything must be launched from terminal
bindsym $mod+d exec $menu

# Reload configuration file
# IMPORTANT: Apply config changes without restart
# WITHOUT: Must restart i3 to apply any config changes
bindsym $mod+Shift+c reload

# Restart i3 in-place (preserves layout/session)
# IMPORTANT: Recover from issues, apply updates
# WITHOUT: Must log out and back in for major changes
bindsym $mod+Shift+r restart

# Exit i3 (with confirmation dialog)
# NEEDED: Graphical logout option
# WITHOUT: Must logout via terminal or system menu
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

### KEY BINDINGS - WINDOW FOCUS ###

# Move focus with vim keys
# ESSENTIAL: Navigate between windows
# WITHOUT: Can only use mouse to select windows
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

# Move focused window with vim keys
# IMPORTANT: Rearrange windows in workspace
# WITHOUT: Cannot reposition windows without mouse
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

### KEY BINDINGS - WORKSPACES ###

# Switch to workspace 1-10
# ESSENTIAL: Multi-desktop workflow
# WITHOUT: Stuck on single workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# Move container to workspace 1-10
# ESSENTIAL: Organize windows across workspaces
# WITHOUT: Windows stuck on workspace where opened
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

### KEY BINDINGS - LAYOUT ###

# Split next window vertically
# USEFUL: Control window arrangement
# WITHOUT: i3 auto-splits, alternating h/v
bindsym $mod+v split v

# Split next window horizontally
# USEFUL: Control window arrangement  
# WITHOUT: i3 auto-splits, alternating h/v
# bindsym $mod+b split h  # Conflicts with vim navigation

# Toggle fullscreen for focused container
# IMPORTANT: Maximize window temporarily
# WITHOUT: Cannot fullscreen windows
bindsym $mod+f fullscreen toggle

# Change container layout (stacking = tabs on top)
# OPTIONAL: Different window organization styles
# WITHOUT: Only split layout available
bindsym $mod+s layout stacking

# Change container layout (tabbed = tabs on top, one visible)
# OPTIONAL: Different window organization styles
# WITHOUT: Only split layout available
bindsym $mod+w layout tabbed

# Toggle between split layouts
# OPTIONAL: Quick layout switching
# WITHOUT: Must choose specific layout each time
bindsym $mod+e layout toggle split

# Toggle between tiling and floating
# IMPORTANT: Some apps work better floating
# WITHOUT: All windows forced to tile
bindsym $mod+Shift+space floating toggle

# Toggle focus between tiling and floating windows
# USEFUL: Quick navigation between layers
# WITHOUT: Must click to focus floating windows
bindsym $mod+space focus mode_toggle

# Focus parent container
# ADVANCED: Navigate container hierarchy
# WITHOUT: Cannot select groups of windows
bindsym $mod+a focus parent

### KEY BINDINGS - SPECIAL KEYS ###

# Volume control with PulseAudio
# IMPORTANT: System volume control
# WITHOUT: Must use pavucontrol or terminal commands
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Screenshot bindings (X11 import + swappy for annotation)
# USEFUL: Quick screenshots with editing
# WITHOUT: Must use screenshot apps from menu
bindsym F11 exec import -display $DISPLAY -window root png:- | swappy -f -
bindsym Print exec import -display $DISPLAY -window root png:- | swappy -f -
bindsym --release Shift+Print exec import png:- | swappy -f -  # Selection screenshot

### MOUSE BINDINGS ###

# Drag floating windows with $mod+mouse
# NEEDED: Move floating windows
# WITHOUT: Cannot reposition floating windows
floating_modifier $mod

# Drag tiling windows by titlebar or with $mod
# OPTIONAL: Mouse-based window management
# WITHOUT: Must use keyboard to move windows
tiling_drag modifier titlebar

### STATUS BAR ###

# i3bar with i3status for system info
# IMPORTANT: Shows workspaces and system status
# WITHOUT: No visual workspace indicator or system info
bar {
    position top
    status_command i3status
}
